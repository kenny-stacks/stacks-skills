---
phase: 06-frontend-integration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/stacks-dev/SKILL.md
autonomous: true

must_haves:
  truths:
    - "SKILL.md Phase 5/5 includes @stacks package installation"
    - "SKILL.md Phase 5/5 mentions post-conditions for value transfers"
    - "SKILL.md Phase 5/5 references clarity-frontend.md for detailed patterns"
    - "SKILL.md stays under 600 lines total"
  artifacts:
    - path: "skills/stacks-dev/SKILL.md"
      provides: "Complete stacks-dev skill with frontend phase"
      contains: "@stacks/connect, @stacks/transactions, @stacks/network"
      max_lines: 600
  key_links:
    - from: "skills/stacks-dev/SKILL.md"
      to: "references/clarity-frontend.md"
      via: "Reference link in Phase 5/5"
      pattern: "clarity-frontend\\.md"
---

<objective>
Update SKILL.md Phase 5/5 (Frontend) with installation steps, post-condition mention, and better workflow guidance.

Purpose: Ensure the skill guides developers through proper frontend integration including critical security patterns, while keeping the file under 600 lines through concise writing.

Output: Updated SKILL.md with enhanced Phase 5/5 frontend content, under 600 lines.
</objective>

<execution_context>
@/Users/kenny/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kenny/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-frontend-integration/06-RESEARCH.md
@skills/stacks-dev/SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update SKILL.md Phase 5/5 with frontend workflow</name>
  <files>skills/stacks-dev/SKILL.md</files>
  <action>
Update the Phase 5/5: Frontend section in SKILL.md. Current SKILL.md is 583 lines. Target: stay under 600 lines.

Modifications to make:

1. **Add Installation subsection after "Devnet Lifecycle" and before "Console Testing":**
   ```
   ### Package Installation

   Install Stacks.js packages for frontend:
   ```bash
   npm install @stacks/connect @stacks/transactions @stacks/network
   ```
   ```

2. **Update the Steps section to include post-conditions:**

   Modify step 2 (Call Contract Functions) to mention post-conditions:
   ```
   2. **Call Contract Functions**
      - Use `@stacks/transactions` for contract calls
      - **Critical:** Add post-conditions for STX/token transfers
      - Handle transaction signing and results
   ```

3. **Add brief "Security Note" before the Reference line:**
   ```
   ### Security Note

   Always use `PostConditionMode.Deny` for token transfers. Post-conditions abort transactions if unexpected asset transfers occur, protecting users from malicious contracts.
   ```

4. **Ensure Reference link is prominent:**
   Keep existing reference link: `**Reference:** For frontend patterns, see [references/clarity-frontend.md](references/clarity-frontend.md)`

Line budget: Add ~12-15 lines max. Remove any redundant content if needed to stay under 600.

DO NOT change content outside Phase 5/5 section.
  </action>
  <verify>
wc -l skills/stacks-dev/SKILL.md
# Must be under 600 lines

grep -q "@stacks/connect @stacks/transactions @stacks/network" skills/stacks-dev/SKILL.md
grep -q "post-conditions" skills/stacks-dev/SKILL.md
grep -q "PostConditionMode.Deny" skills/stacks-dev/SKILL.md
# All patterns must be present
  </verify>
  <done>
SKILL.md Phase 5/5 updated with:
- Package installation command
- Post-conditions mentioned in Steps
- Security Note about PostConditionMode.Deny
- File under 600 lines
  </done>
</task>

</tasks>

<verification>
After completing all tasks:

1. Line count verification:
   ```bash
   wc -l skills/stacks-dev/SKILL.md
   ```
   Must be under 600 lines.

2. Required content:
   ```bash
   grep -E "@stacks/(connect|transactions|network)|post-conditions|PostConditionMode" skills/stacks-dev/SKILL.md | wc -l
   ```
   Must return at least 3 (package install, post-conditions mention, security note).

3. Reference link exists:
   ```bash
   grep "clarity-frontend.md" skills/stacks-dev/SKILL.md
   ```
   Must return the reference link in Phase 5/5 section.
</verification>

<success_criteria>
1. SKILL.md Phase 5/5 includes @stacks package installation
2. Post-conditions mentioned for token transfers
3. Security note about PostConditionMode.Deny
4. Reference to clarity-frontend.md for detailed patterns
5. SKILL.md stays under 600 lines total
</success_criteria>

<output>
After completion, create `.planning/phases/06-frontend-integration/06-02-SUMMARY.md`
</output>
